---
interface Props {
	savedTimezone: string;
	allowedTimezones: string[];
}

const { savedTimezone, allowedTimezones } = Astro.props;
---

<div
	id="timezone-mismatch-banner"
	data-saved-timezone={savedTimezone}
	data-allowed-timezones={JSON.stringify(allowedTimezones)}
	class="mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4 hidden"
	role="alert"
>
	<div class="flex items-start justify-between gap-4">
		<div>
			<p class="text-yellow-900 font-medium">
				We detected your timezone is
				<span id="detected-timezone" class="font-mono"></span>,
				but your account is set to
				<span id="saved-timezone" class="font-mono"></span>.
			</p>
			<p class="text-yellow-800 text-sm mt-1">
				Would you like to update your default timezone?
			</p>
		</div>
		<div class="shrink-0 flex items-center gap-2">
			<form method="POST" action="/api/preferences/timezone">
				<input type="hidden" name="timezone" id="timezone-update-value" value="" />
				<button
					type="submit"
					class="px-3 py-1.5 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition-colors cursor-pointer"
				>
					Update timezone
				</button>
			</form>
			<button
				type="button"
				id="dismiss-timezone-banner"
				class="px-3 py-1.5 bg-white border border-yellow-300 text-yellow-900 rounded-md hover:bg-yellow-100 transition-colors cursor-pointer"
			>
				Not now
			</button>
		</div>
	</div>
</div>
