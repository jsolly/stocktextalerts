---
import type { User } from "../../lib/users";

interface Props {
	user: User;
}

const { user } = Astro.props;

const needsPhoneVerification =
	user.sms_notifications_enabled && !user.phone_verified;
const needsChannelSelection =
	!user.email_notifications_enabled && !user.sms_notifications_enabled;
const needsTimezone = !user.timezone;
const needsSetup =
	needsPhoneVerification || needsChannelSelection || needsTimezone;
---

{needsSetup && (
	<div class="mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-6" role="status" aria-live="polite">
		<h2 class="text-xl font-semibold text-yellow-900 mb-2">Setup Required</h2>
		<p class="text-yellow-800 mb-4">Please complete your setup to receive notifications:</p>
		<ul class="list-disc list-inside text-yellow-800 space-y-1">
			{needsPhoneVerification && (
				<li>Verify your phone number below</li>
			)}
			{needsChannelSelection && (
				<li>Enable at least one notification channel</li>
			)}
			{needsTimezone && (
				<li>Set your timezone in settings</li>
			)}
		</ul>
	</div>
)}
